<div class="flex flex-col min-w-0 flex-1 px-5 justify-start items-start gap-6">
  <div class="flex flex-col w-full justify-start items-start gap-3">
    <div class="flex w-full justify-between items-center gap-5 flex-wrap">
      <div class="text-[#112B3C] text-[56px] font-google-sans-flex font-bold break-words">Trechos de viagens</div>
      <div class="flex flex-1 h-[51px] px-5 bg-[#EEEEEF] rounded-full items-center gap-3.5">
        <img src="assets/icons/search-normal.svg" class="w-5 h-5 opacity-70" alt="Buscar">
        <input type="text" [(ngModel)]="searchQuery" placeholder="Pesquisar por Nome da Rota" class="flex-1 border-none bg-transparent outline-none text-[#646464] text-[20px] font-google-sans-flex font-medium">
      </div>
    </div>
    <div class="flex flex-col w-full drop-shadow-sm">
      <div class="flex flex-col w-full p-5 bg-[#EEEEEF] rounded-t-3xl rounded-b-sm gap-4">
        <div class="flex w-full justify-center items-center gap-3">
          <div class="flex flex-col flex-1 gap-1">
            <div class="text-[#112B3C] text-sm font-google-sans-flex font-medium">Origem</div>
            <div class="flex items-center gap-2.5 p-3 bg-[#FAFAFA] rounded-lg">
              <img src="assets/icons/plane-take-off.svg" class="w-6 h-6 opacity-70" alt="Origem">
              <input type="text" [(ngModel)]="newOrigin" placeholder="Cidade de partida" class="flex-1 border-none bg-transparent outline-none text-[#646464] text-base font-work-sans font-medium">
            </div>
          </div>
          <div class="flex flex-col flex-1 gap-1">
            <div class="text-[#112B3C] text-sm font-google-sans-flex font-medium">Destino</div>
            <div class="flex items-center gap-2.5 p-3 bg-[#FAFAFA] rounded-lg">
              <img src="assets/icons/plane-land.svg" class="w-6 h-6 opacity-70" alt="Destino">
              <input type="text" [(ngModel)]="newDestination" placeholder="Cidade de destino" class="flex-1 border-none bg-transparent outline-none text-[#646464] text-base font-work-sans font-medium">
            </div>
          </div>
        </div>
        <div class="flex w-full justify-between items-center">
          <div class="flex gap-12">
            <div class="flex gap-1.5 items-center">
              <span class="text-[#646464] text-body">Valor estimado da viagem:</span>
              <img src="assets/icons/dollar-circle.svg" class="w-4 h-4 opacity-70" alt="Valor">
              <span class="text-[#112B3C] text-body">R${{ estimatedValue | number:'1.2-2' }}</span>
            </div>
            <div class="flex gap-1.5 items-center">
              <span class="text-[#646464] text-body">Distância:</span>
              <span class="text-[#112B3C] text-body">{{ distance }}km</span>
            </div>
          </div>
          <div (click)="addJourney()" class="cursor-pointer w-[280px] p-3.5 bg-[#F66B0E] shadow-md rounded-lg text-[#EEEEEF] text-[16px] font-google-sans-flex font-bold uppercase text-center tracking-wide">
            adicionar
          </div>
        </div>
      </div>
      <div class="flex flex-col w-full p-6 bg-[#EEEEEF] rounded-b-3xl gap-2.5">
        <div class="flex px-10 py-3.5 bg-[#FAFAFA] rounded-xl justify-between items-center font-google-sans-flex font-bold text-[#112B3C] text-[20px]">
          <div class="flex-1">Nome da rota</div>
          <div class="flex-1">Origem</div>
          <div class="flex-1">Destino</div>
          <div class="w-20 text-right">Ações</div>
        </div>
        @for (journey of journeys(); track journey.id) {
          <div class="flex px-10 py-3.5 justify-between items-center font-google-sans-flex text-[20px] text-[#646464]">
            <div class="flex-1">{{ journey.name }}</div>
            <div class="flex-1">{{ journey.origin }}</div>
            <div class="flex-1">{{ journey.destination }}</div>
            <div class="w-20 flex justify-end gap-5">
              <button (click)="openEditModal(journey)">
                <img src="assets/icons/edit.svg" class="w-6 h-6" />
              </button>
              <button (click)="openDeleteModal(journey)">
                <img src="assets/icons/trash.svg" class="w-6 h-6" />
              </button>
            </div>
          </div>
          <div class="h-px bg-[#646464] opacity-15 w-full mx-10"></div>
        }
      </div>
    </div>
  </div>
  <div class="flex flex-col w-full gap-3 mt-2.5">
    <div class="text-[#112B3C] text-[36px] font-google-sans-flex font-bold">Tarifas</div>
    <div class="flex flex-col p-6 bg-[#EEEEEF] rounded-3xl gap-4">
      <div class="flex justify-between items-center">
        <span class="text-[#112B3C] text-[22px] font-google-sans-flex font-bold">Valor da tarifa para cada km</span>
        <div class="flex items-center gap-2">
          <span class="text-[#112B3C] text-[20px] font-google-sans-flex font-bold">Valor atual:</span>
          <img src="assets/icons/dollar-circle.svg" class="w-4 h-4 opacity-70" alt="Valor">
          <span class="text-[#646464] text-[18px] font-bold">R${{ currentRate | number:'1.2-2' }}</span>
        </div>
      </div>
      <div class="flex p-3 bg-[#FAFAFA] rounded-lg">
        <input type="number" [(ngModel)]="newRateValue" placeholder="Valor em reais" class="flex-1 border-none bg-transparent outline-none text-[#646464] text-base font-work-sans">
      </div>
      <div class="flex justify-between items-center">
        <div class="text-[#646464] text-[16px] font-google-sans-flex">
          Valor para 100km:
          <img src="assets/icons/dollar-circle.svg" class="w-4 h-4 opacity-70 inline ml-1" alt="Valor">
          <strong class="text-[#112B3C]">R${{ currentRate * 100 | number:'1.2-2' }}</strong>
        </div>
        <div (click)="saveRate()" class="cursor-pointer w-[280px] p-3.5 bg-[#F66B0E] shadow-md rounded-lg text-[#EEEEEF] text-[16px] font-google-sans-flex font-bold uppercase text-center">
          Salvar
        </div>
      </div>
    </div>
  </div>
</div>

@if (showEditModal) {
<div class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center z-[1000]">
  <div class="w-[1178px] p-6 bg-[#FAFAFA] rounded-3xl flex flex-col gap-6">
    <div class="text-[#112B3C] text-[64px] font-google-sans-flex font-bold">Editar trechos de viagens</div>
    <div class="flex flex-col w-full gap-5.5">
      <div class="flex flex-col gap-0.5">
        <div class="text-[#112B3C] text-sm font-medium">Origem</div>
        <div class="p-3 bg-[#EEEEEF] rounded-lg">
          <input type="text" [(ngModel)]="selectedJourney.origin" class="w-full border-none bg-transparent outline-none text-[#646464] text-base">
        </div>
      </div>
      <div class="flex flex-col gap-0.5">
        <div class="text-[#112B3C] text-sm font-medium">Destino</div>
        <div class="p-3 bg-[#EEEEEF] rounded-lg">
          <input type="text" [(ngModel)]="selectedJourney.destination" class="w-full border-none bg-transparent outline-none text-[#646464] text-base">
        </div>
      </div>
    </div>
    <div class="flex justify-end gap-6">
      <div (click)="closeModals()" class="cursor-pointer p-3.5 px-15 bg-[#EEEEEF] rounded-lg text-[#557D96] font-bold uppercase">Cancelar</div>
      <div (click)="confirmSaveEdit()" class="cursor-pointer p-3.5 px-15 bg-[#F66B0E] rounded-lg text-[#EEEEEF] font-bold uppercase">Salvar</div>
    </div>
  </div>
</div>
}

@if (showDeleteModal) {
<div class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center z-[1000]">
  <div class="w-[1178px] p-6 bg-[#FAFAFA] rounded-3xl flex flex-col gap-6">
    <div class="text-[#112B3C] text-[64px] font-google-sans-flex font-bold">Excluir trecho de viagem</div>
    <div class="flex flex-col gap-2.5">
      <div class="text-[#112B3C] text-[24px] font-bold">Tem certeza que deseja excluir o trecho {{selectedJourney.name}}?</div>
      <div class="self-start p-2.5 px-6 bg-[#EEEEEF] rounded-xl text-[#F66B0E] text-base font-bold uppercase">Esta ação não poderá ser revertida</div>
    </div>
    <div class="flex justify-end gap-6">
      <div (click)="closeModals()" class="cursor-pointer p-3.5 px-15 bg-[#EEEEEF] rounded-lg text-[#557D96] font-bold uppercase">Cancelar</div>
      <div (click)="confirmDelete()" class="cursor-pointer p-3.5 px-15 bg-[#557D96] rounded-lg text-[#EEEEEF] font-bold uppercase">Excluir</div>
    </div>
  </div>
</div>
}
